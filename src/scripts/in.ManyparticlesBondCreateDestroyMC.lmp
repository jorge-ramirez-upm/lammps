echo none

units           lj
atom_style      bond
special_bonds   fene

variable T equal 1.0
variable L equal 20.0 # BOX SIZE
variable FOLDER string "output"
variable rho equal 0.6
variable Ea equal 0.0
variable Ee equal 2.0
variable MG equal 2.0
boundary        p p p

lattice         sc ${rho}
region box block 0 $L 0 $L 0 $L
create_box 1 box bond/types 1 extra/special/per/atom 10 extra/bond/per/atom 10
create_atoms	1 box
mass		1 1.0

log ${FOLDER}/ManyparticlesBondCreateDestroyMCrho${rho}Ea${Ea}Ee${Ee}MG${MG}L$L.log

neighbor        0.6 multi
neigh_modify    every 1 delay 1 check yes
comm_modify     vel yes
comm_modify cutoff 2.0

bond_style      fene
bond_coeff      1 30.0 1.5 1.0 1.0  # Original Kremer-Grest

print           ""
print       "*****************************************************"
print       "PRODUCTION: Full LJ (WCA) potential, t=1e9 tau"
print       "*****************************************************"
pair_style lj/cut 1.122462048 
pair_modify     shift yes
pair_coeff  * * 1.0 1.0 1.122462048

velocity all create $T  34234123 dist gaussian

timestep        0.01

fix 1 all nve
fix 2 all langevin $T $T 2.0 48279 zero yes # Remove box COM motion by random force

#fix 4 all bond/create/destroy 100 1 1 1.0 1 imax 1 jmax 1 prob 0.1 0.001 21347 Rmin 0.967 diffmol 0
fix 4 all bond/create/destroy/MC 100 1 1 1.0 1 imax 1 jmax 1 energies ${Ea} ${Ee} $T 4893483 FENE 30.0 1.5 LJ 1.0 1.0 Rmin 0.9678598275 maxG ${MG}

thermo 100
thermo_style custom step temp ebond epair etotal press bonds f_4[1] f_4[2] f_4[3] f_4[4] f_4[5] 
thermo_modify norm no flush yes
dump            coord all custom 100 ${FOLDER}/ManyparticlesBondCreateDestroyMCrho${rho}Ea${Ea}Ee${Ee}MG${MG}L$L.lammpstrj.gz id x y z
dump_modify coord sort id 

restart 10000 ${FOLDER}/ManyparticlesBondCreateDestroyMCrho${rho}Ea${Ea}Ee${Ee}MG${MG}L$L_restart1.dat ${FOLDER}/ManyparticlesBondCreateDestroyMCrho${rho}Ea${Ea}Ee${Ee}MG${MG}L$L_restart2.dat
reset_timestep 0 
run 10000
write_data ${FOLDER}/ManyparticlesBondCreateDestroyMCrho${rho}Ea${Ea}Ee${Ee}MG${MG}L$L.lammpsdat
